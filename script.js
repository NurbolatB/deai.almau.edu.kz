// –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
const translations = {
    ru: {
        // Header
        'register-btn': '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
        
        // Hero section
        'hero-title': 'Digitalization of Education in the Era of AI',
        'hero-desc': '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –Ω–∞—É—á–Ω–æ-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è',
        'hero-meta': 'üìÖ –ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω 17-18 –º–∞—Ä—Ç–∞ 2026',
        'hero-cta': '–£–∑–Ω–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É',
        
        // Navigation
        'nav-about': '–û –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏',
        'nav-program': '–¢–µ–º—ã',
        'nav-speakers': '–°–ø–∏–∫–µ—Ä—ã',
        'nav-faq': 'FAQ',
        'nav-contacts': '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
        
        // About section
        'about-title': '–û –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏',
        'about-text': '–ó–¥–µ—Å—å –±—É–¥–µ—Ç –±–ª–æ–∫ ¬´–æ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏¬ª ‚Äî —Ü–µ–ª—å, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã, –ø–∞—Ä—Ç–Ω—ë—Ä—ã.',
        
        // Program section
        'program-title': '–¢–µ–º—ã',
        'program-session-1': '–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏',
        'program-speaker-1': '–î–æ–∫–ª–∞–¥—á–∏–∫ ‚Äî –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
        
        // Speakers section
        'speakers-title': '–°–ø–∏–∫–µ—Ä—ã',
        'speaker-1-name': '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
        'speaker-1-bio': '–ö—Ä–∞—Ç–∫–∞—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è.',
        
        // Registration section
        'registration-title': '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
        'registration-desc': '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏',
        'label-name': '–§–ò–û',
        'label-email': 'Email',
        'label-phone': '–¢–µ–ª–µ—Ñ–æ–Ω',
        'label-country': '–°—Ç—Ä–∞–Ω–∞',
        'label-organization': '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è / –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç',
        'label-role': '–†–æ–ª—å',
        'label-format': '–§–æ—Ä–º–∞—Ç —É—á–∞—Å—Ç–∏—è',
        'label-topic': '–¢–µ–º–∞ –¥–æ–∫–ª–∞–¥–∞',
        'label-comments': '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏',
        'role-participant': '–£—á–∞—Å—Ç–Ω–∏–∫',
        'role-speaker': '–î–æ–∫–ª–∞–¥—á–∏–∫',
        'role-student': '–°—Ç—É–¥–µ–Ω—Ç',
        'role-teacher': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å',
        'format-online': '–û–Ω–ª–∞–π–Ω',
        'format-offline': '–û—Ñ–ª–∞–π–Ω',
        'submit-btn': '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
        'submit-loading': '–û—Ç–ø—Ä–∞–≤–∫–∞...',
        'form-success': '‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É.',
        'form-error': '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é.',
        'form-validation-name': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –§–ò–û',
        'form-validation-email': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email',
        'form-validation-organization': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é',
        'form-validation-role': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å',
        'form-validation-format': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç —É—á–∞—Å—Ç–∏—è',
        'form-validation-topic': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ç–µ–º—É –¥–æ–∫–ª–∞–¥–∞',
        
        // Contacts section
        'contacts-title': '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
        'contacts-text1': 'üìç –ê–¥—Ä–µ—Å: –≥. –ê–ª–º–∞—Ç—ã, —É–ª. –†–æ–∑—ã–±–∞–∫–∏–µ–≤–∞, 227, –∫–∞–±–∏–Ω–µ—Ç 253',
        'contacts-text2': 'üì± –¢–µ–ª–µ—Ñ–æ–Ω: +7 701 761 9108',
        'contacts-text3': 'üìß E-mail: deai.almau.edu.kz',
        'contacts-text4': 'üåê –°–∞–π—Ç: https://almau.edu.kz',
        
        // Footer
        'footer-text': '¬© –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã ‚Äî AlmaU',
        
        // Speakers button
        'show-more-speakers': '–ü–æ–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–µ',
        'show-less-speakers': '–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—å—à–µ'
    },
    
    kz: {
        // Header
        'register-btn': '–¢—ñ—Ä–∫–µ–ª—É',
        
        // Hero section
        'hero-title': 'Digitalization of Education in the Era of AI',
        'hero-desc': '–•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ “ì—ã–ª—ã–º–∏-—Ç”ô–∂—ñ—Ä–∏–±–µ–ª—ñ–∫ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è',
        'hero-meta': 'üìÖ –ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω 17-18 –Ω–∞—É—Ä—ã–∑ 2026',
        'hero-cta': '–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–Ω—ã –±—ñ–ª—É',
        
        // Navigation
        'nav-about': '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è —Ç—É—Ä–∞–ª—ã',
        'nav-program': '–¢–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä',
        'nav-speakers': '–°–ø–∏–∫–µ—Ä–ª–µ—Ä',
        'nav-faq': '–°“±—Ä–∞“õ—Ç–∞—Ä',
        'nav-contacts': '–ë–∞–π–ª–∞–Ω—ã—Å',
        
        // About section
        'about-title': '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è —Ç—É—Ä–∞–ª—ã',
        'about-text': '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è–Ω—ã“£ –º–∞“õ—Å–∞—Ç—ã, “±–π—ã–º–¥–∞—Å—Ç—ã—Ä—É—à—ã–ª–∞—Ä, —Å–µ—Ä—ñ–∫—Ç–µ—Å—Ç–µ—Ä —Ç—É—Ä–∞–ª—ã –∞“õ–ø–∞—Ä–∞—Ç.',
        
        // Program section
        'program-title': '–¢–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä',
        'program-session-1': '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è–Ω—ã“£ –∞—à—ã–ª—É—ã',
        'program-speaker-1': '–î–æ–∫–ª–∞–¥—à—ã ‚Äî –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
        
        // Speakers section
        'speakers-title': '–°–ø–∏–∫–µ—Ä–ª–µ—Ä',
        'speaker-1-name': '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
        'speaker-1-bio': '“ö—ã—Å“õ–∞—à–∞ ”©–º—ñ—Ä–±–∞—è–Ω—ã.',
        
        // Registration section
        'registration-title': '–¢—ñ—Ä–∫–µ–ª—É',
        'registration-desc': '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è“ì–∞ “õ–∞—Ç—ã—Å—É “Ø—à—ñ–Ω —Ç”©–º–µ–Ω–¥–µ–≥—ñ —Ñ–æ—Ä–º–∞–Ω—ã —Ç–æ–ª—Ç—ã—Ä—ã“£—ã–∑',
        'label-name': '–ê—Ç—ã-–∂”©–Ω—ñ',
        'label-email': '–≠–ª–µ–∫—Ç—Ä–æ–Ω–¥—ã“õ –ø–æ—à—Ç–∞',
        'label-phone': '–¢–µ–ª–µ—Ñ–æ–Ω',
        'label-country': '–ï–ª',
        'label-organization': '“∞–π—ã–º / –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç',
        'label-role': '–†”©–ª',
        'label-format': '“ö–∞—Ç—ã—Å—É —Ñ–æ—Ä–º–∞—Ç—ã',
        'label-topic': '–î–æ–∫–ª–∞–¥ —Ç–∞“õ—ã—Ä—ã–±—ã',
        'label-comments': '“ö–æ—Å—ã–º—à–∞ —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç–µ–º–µ–ª–µ—Ä',
        'role-participant': '“ö–∞—Ç—ã—Å—É—à—ã',
        'role-speaker': '–î–æ–∫–ª–∞–¥—à—ã',
        'role-student': '–°—Ç—É–¥–µ–Ω—Ç',
        'role-teacher': '–û“õ—ã—Ç—É—à—ã',
        'format-online': '–û–Ω–ª–∞–π–Ω',
        'format-offline': '–û—Ñ–ª–∞–π–Ω',
        'submit-btn': '–¢—ñ—Ä–∫–µ–ª—É',
        'submit-loading': '–ñ—ñ–±–µ—Ä—ñ–ª—É–¥–µ...',
        'form-success': '‚úÖ –¢—ñ—Ä–∫–µ–ª—É —Å”ô—Ç—Ç—ñ –∞—è“õ—Ç–∞–ª–¥—ã! –ë—ñ–∑ —Å—ñ–∑–¥—ñ“£ –ø–æ—à—Ç–∞“£—ã–∑“ì–∞ —Ä–∞—Å—Ç–∞—É –∂—ñ–±–µ—Ä–¥—ñ–∫.',
        'form-error': '‚ùå –§–æ—Ä–º–∞–Ω—ã –∂—ñ–±–µ—Ä—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã. “ö–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑ –Ω–µ–º–µ—Å–µ –±—ñ–∑–±–µ–Ω —Ç—ñ–∫–µ–ª–µ–π –±–∞–π–ª–∞–Ω—ã—Å—ã“£—ã–∑.',
        'form-validation-name': '–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑',
        'form-validation-email': '–î“±—Ä—ã—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–¥—ã“õ –ø–æ—à—Ç–∞–Ω—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑',
        'form-validation-organization': '“∞–π—ã–º—ã“£—ã–∑–¥—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑',
        'form-validation-role': '–†”©–ª—ñ“£—ñ–∑–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑',
        'form-validation-format': '“ö–∞—Ç—ã—Å—É —Ñ–æ—Ä–º–∞—Ç—ã–Ω —Ç–∞“£–¥–∞“£—ã–∑',
        'form-validation-topic': '–î–æ–∫–ª–∞–¥ —Ç–∞“õ—ã—Ä—ã–±—ã–Ω –∫”©—Ä—Å–µ—Ç—ñ“£—ñ–∑',
        
        // Contacts section
        'contacts-title': '–ë–∞–π–ª–∞–Ω—ã—Å',
        'contacts-text1': 'üìç –ú–µ–∫–µ–Ω–∂–∞–π: –ê–ª–º–∞—Ç—ã –∫., –†–æ–∑—ã–±–∞–∫–∏–µ–≤–∞ –∫”©—à., 227, 253-–∫–∞–±–∏–Ω–µ—Ç',
        'contacts-text2': 'üì± –¢–µ–ª–µ—Ñ–æ–Ω: +7 701 761 9108',
        'contacts-text3': 'üìß E-mail: deai.almau.edu.kz',
        'contacts-text4': 'üåê –°–∞–π—Ç: https://almau.edu.kz',
        
        // Footer
        'footer-text': '¬© “∞–π—ã–º–¥–∞—Å—Ç—ã—Ä—É—à—ã–ª–∞—Ä ‚Äî AlmaU',
        
        // Speakers button
        'show-more-speakers': '–ö”©–±—ñ—Ä–µ–∫ –∫”©—Ä—Å–µ—Ç—É',
        'show-less-speakers': '–ê–∑—ã—Ä–∞“õ –∫”©—Ä—Å–µ—Ç—É'
    },
    
    en: {
        // Header
        'register-btn': 'Register',
        
        // Hero section
        'hero-title': 'Digitalization of Education in the Era of AI',
        'hero-desc': 'International Scientific and Practical Conference',
        'hero-meta': 'üìÖ Almaty, Kazakhstan March 17-18, 2026',
        'hero-cta': 'View Program',
        
        // Navigation
        'nav-about': 'About',
        'nav-program': 'Topics',
        'nav-speakers': 'Speakers',
        'nav-faq': 'FAQ',
        'nav-contacts': 'Contacts',
        
        // About section
        'about-title': 'About Conference',
        'about-text': 'Information about the conference goals, organizers, and partners.',
        
        // Program section
        'program-title': 'Topics',
        'program-session-1': 'Conference Opening',
        'program-speaker-1': 'Speaker ‚Äî Ivan Ivanov',
        
        // Speakers section
        'speakers-title': 'Speakers',
        'speaker-1-name': 'Ivan Ivanov',
        'speaker-1-bio': 'Short biography.',
        
        // Registration section
        'registration-title': 'Registration',
        'registration-desc': 'Fill out the form below to participate in the conference',
        'label-name': 'Full Name',
        'label-email': 'Email',
        'label-phone': 'Phone',
        'label-country': 'Country',
        'label-organization': 'Organization / University',
        'label-role': 'Role',
        'label-format': 'Participation Format',
        'label-topic': 'Presentation Topic',
        'label-comments': 'Additional Comments',
        'role-participant': 'Participant',
        'role-speaker': 'Speaker',
        'role-student': 'Student',
        'role-teacher': 'Teacher',
        'format-online': 'Online',
        'format-offline': 'Offline',
        'submit-btn': 'Register',
        'submit-loading': 'Submitting...',
        'form-success': '‚úÖ Registration completed successfully! We sent a confirmation to your email.',
        'form-error': '‚ùå An error occurred while submitting the form. Please try again or contact us directly.',
        'form-validation-name': 'Please enter your full name',
        'form-validation-email': 'Please enter a valid email',
        'form-validation-organization': 'Please enter your organization',
        'form-validation-role': 'Please select your role',
        'form-validation-format': 'Please select participation format',
        'form-validation-topic': 'Please specify presentation topic',
        
        // Contacts section
        'contacts-title': 'Contacts',
        'contacts-text1': 'üìç Address: Almaty, Rozybakiev st., 227, office 253',
        'contacts-text2': 'üì± Phone: +7 701 761 9108',
        'contacts-text3': 'üìß E-mail: deai.almau.edu.kz',
        'contacts-text4': 'üåê Website: https://almau.edu.kz',
        
        // Footer
        'footer-text': '¬© Organizers ‚Äî AlmaU',
        
        // Speakers button
        'show-more-speakers': 'Show more',
        'show-less-speakers': 'Show less'
    }
};

// –¢–µ–∫—É—â–∏–π —è–∑—ã–∫
let currentLang = 'ru';

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–∑—ã–∫–∞
function changeLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLang = lang;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å data-i18n –∞—Ç—Ä–∏–±—É—Ç–æ–º
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (element.tagName === 'INPUT' && element.type !== 'submit') {
                element.placeholder = translations[lang][key];
            } else if (element.tagName === 'BUTTON' && element.type === 'submit') {
                element.textContent = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º aria-selected —É –∫–Ω–æ–ø–æ–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
    document.querySelectorAll('.lang-btn').forEach(btn => {
        const btnLang = btn.getAttribute('data-lang');
        btn.setAttribute('aria-selected', btnLang === lang);
    });
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä —è–∑—ã–∫–∞ –≤ localStorage
    localStorage.setItem('preferred-language', lang);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ñ–æ—Ä–º—ã
function showFormMessage(message, type = 'success') {
    const formMessages = document.getElementById('form-messages');
    if (!formMessages) return;
    
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${type}`;
    messageDiv.textContent = message;
    formMessages.appendChild(messageDiv);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    setTimeout(() => {
        messageDiv.style.opacity = '0';
        setTimeout(() => messageDiv.remove(), 300);
    }, 5000);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Ñ–æ—Ä–º—ã
function clearFormMessages() {
    const formMessages = document.getElementById('form-messages');
    if (formMessages) {
        formMessages.innerHTML = '';
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email
function isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã
function validateForm(formData) {
    if (!formData.name.trim()) {
        showFormMessage(translations[currentLang]['form-validation-name'], 'error');
        return false;
    }
    
    if (!formData.email.trim() || !isValidEmail(formData.email)) {
        showFormMessage(translations[currentLang]['form-validation-email'], 'error');
        return false;
    }
    
    if (!formData.organization.trim()) {
        showFormMessage(translations[currentLang]['form-validation-organization'], 'error');
        return false;
    }
    
    if (!formData.role) {
        showFormMessage(translations[currentLang]['form-validation-role'], 'error');
        return false;
    }
    
    if (!formData.format) {
        showFormMessage(translations[currentLang]['form-validation-format'], 'error');
        return false;
    }
    
    if (formData.role === '–î–æ–∫–ª–∞–¥—á–∏–∫' && !formData.topic.trim()) {
        showFormMessage(translations[currentLang]['form-validation-topic'], 'error');
        return false;
    }
    
    return true;
}

// –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
document.addEventListener('DOMContentLoaded', function() {
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—Å—Å–∫–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const savedLang = localStorage.getItem('preferred-language') || 'ru';
    changeLanguage(savedLang);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            changeLanguage(lang);
        });
    });
    
    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è —è–∫–æ—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // ===== –û–ë–†–ê–ë–û–¢–ö–ê –§–û–†–ú–´ –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò =====
    const registrationForm = document.getElementById('registration-form');
    const roleSelect = document.getElementById('role');
    const topicField = document.getElementById('topic-field');
    const topicInput = document.getElementById('topic');

    // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –ø–æ–ª—è —Ç–µ–º—ã –¥–ª—è –¥–æ–∫–ª–∞–¥—á–∏–∫–æ–≤
    if (roleSelect && topicField) {
        roleSelect.addEventListener('change', function() {
            if (this.value === '–î–æ–∫–ª–∞–¥—á–∏–∫') {
                topicField.style.display = 'block';
                topicInput.required = true;
            } else {
                topicField.style.display = 'none';
                topicInput.required = false;
                topicInput.value = '';
            }
        });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    if (registrationForm) {
        registrationForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoading = submitBtn.querySelector('.btn-loading');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            if (btnText && btnLoading) {
                btnText.style.display = 'none';
                btnLoading.style.display = 'inline';
            }
            submitBtn.disabled = true;
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            clearFormMessages();
            
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
                if (!validateForm(data)) {
                    return;
                }
                
                // URL –≤–∞—à–µ–≥–æ Google Apps Script (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à)
                const SCRIPT_URL = 'hhttps://script.google.com/macros/s/AKfycbwPIeB6WikHnZAjfAUtRYSJhKGYkckJiv5diWE7nJaqD47JD81XipMmaAh1o1fBA1I2Iw/exec';
                
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success || result.result === 'success') {
                    showFormMessage(translations[currentLang]['form-success'], 'success');
                    registrationForm.reset();
                    if (topicField) topicField.style.display = 'none';
                } else {
                    throw new Error(result.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã');
                }
            } catch (error) {
                console.error('Form submission error:', error);
                showFormMessage(translations[currentLang]['form-error'], 'error');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                if (btnText && btnLoading) {
                    btnText.style.display = 'inline';
                    btnLoading.style.display = 'none';
                }
                submitBtn.disabled = false;
            }
        });
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    const phoneInput = document.getElementById('phone');
    if (phoneInput) {
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.startsWith('7') || value.startsWith('8')) {
                value = value.substring(1);
            }
            
            let formattedValue = '+7';
            if (value.length > 0) {
                formattedValue += ' (' + value.substring(0, 3);
            }
            if (value.length > 3) {
                formattedValue += ') ' + value.substring(3, 6);
            }
            if (value.length > 6) {
                formattedValue += '-' + value.substring(6, 8);
            }
            if (value.length > 8) {
                formattedValue += '-' + value.substring(8, 10);
            }
            
            e.target.value = formattedValue;
        });
    }

    // ===== SPEAKERS SHOW MORE/LESS =====
    const showMoreBtn = document.getElementById('show-more-speakers');
    const addlCards = document.querySelectorAll('#speakers-list .addl');
    let expanded = false;

    if (showMoreBtn && addlCards.length > 0) {
        showMoreBtn.addEventListener('click', () => {
            expanded = !expanded;
            addlCards.forEach(el => el.style.display = expanded ? 'block' : 'none');
            showMoreBtn.textContent = expanded ? 
                translations[currentLang]['show-less-speakers'] : 
                translations[currentLang]['show-more-speakers'];
        });
    }

    // ===== INFO TOGGLE BUTTONS =====
    document.querySelectorAll('.info-toggle').forEach(btn => {
        btn.addEventListener('click', function() {
            const content = this.nextElementSibling;
            if (content && content.classList.contains('info-content')) {
                content.style.display = (content.style.display === 'block') ? 'none' : 'block';
                this.classList.toggle('active');
            }
        });
    });
});

// –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–ø–∏–∫–µ—Ä–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
function updateSpeakersButton() {
    const showMoreBtn = document.getElementById('show-more-speakers');
    const addlCards = document.querySelectorAll('#speakers-list .addl');
    let expanded = false;
    
    if (showMoreBtn) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã—Ç—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
        if (addlCards.length > 0) {
            expanded = addlCards[0].style.display === 'block';
        }
        
        showMoreBtn.textContent = expanded ? 
            translations[currentLang]['show-less-speakers'] : 
            translations[currentLang]['show-more-speakers'];
    }
}

// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º changeLanguage –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Å–ø–∏–∫–µ—Ä–æ–≤
const originalChangeLanguage = changeLanguage;
changeLanguage = function(lang) {
    originalChangeLanguage(lang);
    updateSpeakersButton();
};
